var mp=function(){Array();var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=null,t=null,n=null,i={api:"http://www.ppgoogle.com/api/"},r=null,a=new Object;a.config=0,a.sync=0,a.login=0,a.checkServerTime=0,a.feedback=0,a.ip=0,this.background=function(){var e=new Object,m=new Object,u=new Array,g=new Array,d=new Array,f=function(){$(document).ready(function(){if(e.domains=new Object,e.pids=new Object,L(),H(),M(),A("conflict"))return!1;w(!0),O(),D(),E(),S(),J();var o=chrome.runtime.id,t=chrome.runtime.getManifest().version;h(1,"background",o,t)})},b=function(e){if(1===a.config)return!1;a.config=1;var n=Date.now(),r=chrome.runtime.id,s=chrome.runtime.getManifest().version,c=void 0===t.member.mid?0:t.member.mid,l=void 0===t.member.gid?"":t.member.gid,m=md5(r+s);$.post(i.api+"chrome/config/",{mid:c,gid:l,extid:r,version:s,language:navigator.language,token:m,ajax:1},function(c){if(setTimeout(function(){a.config=0},3e4),void 0===c)return!1;if(1==c.status){var l=JSON.parse(R(c.data));if(C(l))return!1;(o=l).updated=n,j("c",o),void 0!==e&&!0===e&&setTimeout(function(){window.location.reload()},3e3)}else-2==c.status?(t.enable=-1,j("s",t),h(4,"background","blockCountry",r+"-"+s+"-"+navigator.language)):(null===o?setTimeout(function(){window.location.reload(!0)},6e5):setTimeout(function(){window.location.reload(!0)},6e4),h(4,"background","getConfigFail",r+"-"+s+"-"+navigator.language+"-"+i.api))})},w=function(e,o,t){a.ip=1,0;var r=chrome.runtime.id,s=chrome.runtime.getManifest().version,c=x(Date.now(),"yyyyMMdd"),l=md5(r+s);$.post(i.api+"chrome/sync/",{mid:0,gid:"",date:c,timelimit:1800,extid:r,exttype:"ggfwzs",version:s,get:"ip",token:l,ajax:1},function(e){1==e.status&&(n=JSON.parse(R(e.data)))&&U(!0)})},y=function(e){var t=Date.now();if(null!==r&&!0!==e&&r.updated>t-6e4)return void 0!==r.system.white&&void 0!==r.robot.white&&void 0!==r.user.white&&void 0!==r.system.black&&void 0!==r.robot.black&&void 0!==r.user.black||(q("l"),r=null),!0;if(null!==r){"undefinde"==typeof o.config.time.getSync&&(o.config.time.getSync=6e5);var n=o.config.time.getSync>1e3?o.config.time.getSync:6e5;r.updated<t-n&&B("getDomain"),k()}else null===(r=A("l"))&&B("getDomain")},k=function(){if(null===r)return!1;var e,o;if(r.robot.white.length>0)for(var t in r.robot.white)e=r.robot.white[t],(o=r.system.white.indexOf(e))>-1&&r.system.white.splice(o,1);if(r.robot.black.length>0)for(var t in r.robot.black)e=r.robot.black[t],(o=r.system.black.indexOf(e))>-1&&r.system.black.splice(o,1);if(r.user.black.length>0)for(var t in r.user.black)e=r.user.black[t],-1==(o=r.system.white.indexOf(e))&&r.user.black.splice(o,1);j("l",r)},O=function(){chrome.webRequest.onBeforeRequest.addListener(function e(o){if(u.length>0)return chrome.webRequest.onBeforeRequest.removeListener(e),!1;if(!o||!o.url||"other"==o.type||o.tabId<1)return!1;if("favicon.ico"==o.url.substr(o.url.length-11))return!1;var t=F(o.type),n=v(o.url),i=o.tabId;if(!n)return!1;t&&(void 0===m[i]||C(m[i].parent)||m[i].parent!=v(o.url)&&(m[i]=new Object,m[i].parent="",m[i].son=new Array));void 0===m[i]&&(m[i]=new Object,m[i].parent="",m[i].son=new Array),t&&(m[i].parent=n),-1==m[i].son.indexOf(n)&&m[i].son.push(n)},{urls:["http://*/*","https://*/*"]})},D=function(){if(u.length>0)return!1;chrome.tabs.onUpdated.addListener(function(e,o,t){if(void 0===t)return!1;-1==g.indexOf(t.id)&&g.push(t.id)}),chrome.tabs.onCreated.addListener(function(e){if(void 0===e)return!1;-1==g.indexOf(e.id)&&g.push(e.id)}),chrome.tabs.onRemoved.addListener(function(e,o){if(void 0===e)return!1;var t=g.indexOf(e);t>-1&&g.splice(t,1)}),chrome.tabs.onActivated.addListener(function(e){})},E=function(){chrome.webRequest.onCompleted.addListener(function e(o){if(u.length>0)return chrome.webRequest.onBeforeRequest.removeListener(e),!1;if("other"==o.type)return!1;if(1==o.fromCache)return!1;if(204==o.statusCode)return!1;var t=P(o.url),n=(null===t||t.id,v(o.url));Y(o.statusCode);return!!n&&void 0},{urls:["http://*/*","https://*/*"]})};chrome.notifications.onButtonClicked.addListener(function(e,o){"surplusReconnect"==e&&(chrome.tabs.create({url:"http://www.iwikimedia.com/ppgg/serverreport.htm"}),setTimeout(function(){chrome.notifications.clear("surplusReconnect"),window.location.reload()},2e3))}),chrome.notifications.onClicked.addListener(function(e){"surplusReconnect"==e&&(chrome.tabs.create({url:"http://www.iwikimedia.com/ppgg/serverreport.htm"}),setTimeout(function(){chrome.notifications.clear("surplusReconnect"),window.location.reload()},2e3))});var S=function(){var o=0;chrome.webRequest.onErrorOccurred.addListener(function t(n){if(u.length>0)return chrome.webRequest.onBeforeRequest.removeListener(t),!1;if("other"==n.type)return!1;if("net::ERR_PROXY_CONNECTION_FAILED"!=n.error&&"net::ERR_SOCKS_CONNECTION_FAILED"!=n.error||++o>10&&(o=0,w()),"net::ERR_ABORTED"!=n.error&&"main_frame"==n.type&&(n.url.indexOf(".google.")>-1||n.url.indexOf("/google.")>-1)){c.create("!","red");s.create("surplusReconnect","progress",{title:"点击换服务器",message:"连接谷歌失败。点击这里，重新分配服务器。",iconUrl:"icon.png",progress:50,buttons:[{title:"换服务器"}],isClickable:!0},0,15e3,function(){}),setTimeout(function(){c.clear(!0),chrome.notifications.clear("surplusReconnect")},15500)}var i=P(n.url),r=v(n.url),a=null===i?"":i.id;if(!r)return!1;a?(void 0===e.pids[a]&&(e.pids[a]={success:0,error:0,count:0}),e.pids[a].error+=1,e.pids[a].count+=1):(void 0===e.domains[r]&&(e.domains[r]={success:0,error:0,count:0}),e.domains[r].error+=1,e.domains[r].count+=1)},{urls:["http://*/*","https://*/*"]})},L=function(){chrome.runtime.onMessage.addListener(function(e,a,s){if("get"==e.type){if("config"==e.key)s({value:o});else if("system"==e.key)s({value:t});else if("domain"==e.key){var c=e.value;if(!c||C(m[c])||C(m[c].son))var l=null;else l=m[c].son;s({value:l})}else if("data"==e.key){var u=new Object;u.config=o,u.system=t,u.lists=r,u.proxy=n,u.url=i,s({value:u})}}else if("set"==e.type)if(void 0!==e.value)if("config"==e.key)o=e.value,j("c",e.value),s({value:!0});else if("system"==e.key)t=e.value,j("s",e.value),s({value:!0});else if("addDomain"==e.key){var g=e.value;N(g,"user","white"),y(!0),1==t.enable&&U(!0),s({value:r})}else if("removeDomain"==e.key){g=e.value;_(g),y(!0),1==t.enable&&U(!0),s({value:r})}else"healthy"==e.key?s({value:!0}):"proxy"==e.key?(!0===e.value?(U(!0),t.enable=1,j("s",t)):!1===e.value&&(U(!1),t.enable=0,j("s",t)),s({value:!0})):"lists"==e.key?(updateLists(),s({value:!0})):"reload"==e.key?(window.location.reload(),s({value:!0})):"logout"==e.key?(I(),s({value:!0})):"reconfig"==e.key&&(b(!0),s({value:!0}));else s({value:!1})})},M=function(){chrome.management.onEnabled.addListener(function(e){H()}),chrome.management.onDisabled.addListener(function(e){H()}),chrome.management.onInstalled.addListener(function(e){H()}),chrome.management.onUninstalled.addListener(function(e){H()})},T=function(o){if(void 0===e.domains[o])return!1;var t=e.domains[o].success,n=e.domains[o].error;return(Math.pow(t,2)+(n+1))/(t+Math.pow(n+1,2))},N=function(e,o,t){if("user"==o){if("white"==t){void 0===r.user.white&&(r.user.white=new Array);var n=r.user.black.indexOf(e);if(n>-1)r.user.black.splice(n,1);else if(-1==r.user.white.indexOf(e)){r.user.white.push(e),(i=new Object)[e]=-5,B("setDomain",i)}}}else if("robot"==o)if("white"==t){if(void 0!==r.system.white&&r.system.white.indexOf(e)>-1)return!1;if(void 0!==r.robot.white&&r.robot.white.indexOf(e)>-1)return!1;if(void 0!==r.user.white&&r.user.white.indexOf(e)>-1)return!1;if(void 0!==r.user.black&&r.user.black.indexOf(e)>-1)return!1;r.robot.white.push(e);var i=new Object;r.system.black.indexOf(e)>-1?i[e]=-5:i[e]=-1,B("setDomain",i)}else if("black"==t){if(void 0!==r.system.black&&r.system.black.indexOf(e)>-1)return!1;if(void 0!==r.robot.black&&r.robot.black.indexOf(e)>-1)return!1;if(void 0!==r.user.black&&r.user.black.indexOf(e)>-1)return!1;if(void 0!==r.user.white&&r.user.white.indexOf(e)>-1)return!1;r.robot.black.push(e);i=new Object;void 0!==r.system.white&&r.system.white.indexOf(e)>-1?i[e]=5:i[e]=1,B("setDomain",i)}j("l",r)},_=function(e){var o;(o=r.user.white.indexOf(e))>-1&&r.user.white.splice(o,1),(o=r.robot.white.indexOf(e))>-1&&r.robot.white.splice(o,1),-1==r.user.black.indexOf(e)&&r.user.black.push(e),j("l",r)},B=function(n,s){if(1===a.sync)return!1;a.sync=1;var c=Date.now(),l=chrome.runtime.id,m=chrome.runtime.getManifest().version,u=void 0===t.member.mid?0:t.member.mid,g=void 0===t.member.gid?"":t.member.gid,d=md5(l+m);if("setDomain"==n){var f,h=A("y");if(null===h&&(h=new Object),void 0===s){s=new Object;for(var p in e.domains)if("diff"!=o.config.sync.type||!(r.system.white.indexOf(p)>-1||r.system.black.indexOf(p)>-1)){if(void 0===o.config.time.validity)var v=36e5;else v=o.config.time.validity>6e4?o.config.time.validity:36e5;void 0!==h[p]&&c-h[p]<v||((f=T(p))>3.5?(s[p]=1,h[p]=c):f<.18&&(s[p]=-1,h[p]=c))}j("y",h)}C(s)||(s=z(JSON.stringify(s)),$.post(i.api+"chrome/sync/",{mid:u,gid:g,extid:l,version:m,d:s,token:d,ajax:1},function(o){setTimeout(function(){a.sync=0},3e3),void 0!==o&&1==o.status&&(e.domains=new Object)}))}else"getDomain"==n&&$.post(i.api+"chrome/sync/",{mid:u,gid:g,extid:l,version:m,get:"domain",token:d,ajax:1},function(e){if(setTimeout(function(){a.sync=0},3e3),1==e.status){null===r&&((r=new Object).system=new Object,r.robot=new Object,r.robot.white=new Array,r.robot.black=new Array,r.user=new Object,r.user.white=new Array,r.user.black=new Array);var o=JSON.parse(R(e.data));(C(o)||"undefinde"==typeof o.white||"undefinde"==typeof o.black||null==o.white||null==o.black)&&((o=new Object).white=new Array,o.black=new Array),r.system=o,r.updated=c,j("l",r),k(),1==t.enable&&U(!0)}})},U=function(e){if(console.log("setProxy:"+e),!0===(e=!0)){if(null===n)return console.log("proxy is null when setting proxy"),!1;var o={mode:"pac_script",pacScript:{data:'function FindProxyForURL(url, host) {\nvar D="DIRECT;", P = "'+n.pw.ip+';";\n    var H = {\n        "googleapis.com":1,\n        "googlecode.com":1,\n        "googleusercontent.com":1,\n        "ggpht.com":1,\n        "gstatic.com":1,\n        "gmail.com":1,\n        "googlegroups.com":1,\n        "goo.gl":1,\n        "googleratings.com":1,\n        "test-ggfwzs-proxy.com":1,\n        "t.co":1,\n        "google.com.hk":1,\n        "google.com.tw":1,\n        "google.co.jp" :1,\n        "google.co.kr" :1,\n        "google.co.th" :1,\n        "google.com.vn" :1,\n        "google.com.sg":1,\n        "google.com.my":1,\n        "google.com.ru":1,\n        "google.ae"    :1,\n        "google.com.sa":1,\n        "google.co.in" :1,\n        "google.com.np":1,\n        "google.de"    :1,\n        "google.com.kw"    :1,\n        "google.com.co"    :1,\n        "google.fr"    :1,\n        "google.co.uk" :1,\n        "google.it"    :1,\n        "google.gr"    :1,\n        "google.pt"    :1,\n        "google.es"    :1,\n        "google.co.il" :1,\n        "google.ch"    :1,\n        "google.se"    :1,\n        "google.nl"    :1,\n        "google.be"    :1,\n        "google.at"    :1,\n        "google.pl"    :1,\n        "google.pt"    :1,\n        "google.es"    :1,\n        "google.fi"    :1,\n        "google.nl"    :1,\n        "google.co.hu" :1,\n        "google.com.tr":1,\n        "google.ro"    :1,\n        "google.dk"    :1,\n        "google.no"    :1,\n        "google.com.au":1,\n        "google.co.nz" :1,\n        "google.ca"    :1,\n        "google.com"   :1,\n        "google.com.mx":1,\n        "google.com.br":1,\n        "google.com.ar":1,\n        "google.cl"    :1,\n        "google.com.pe":1,\n        "google.com.eg":1,\n        "google.com.pa":1,\n        "google.lt"    :1,\n        "google.bi"    :1,\n        "google.pn"    :1,\n        "google.li"    :1,\n        "google.com.nf":1,\n        "google.vg"    :1,\n        "google.mw"    :1,\n        "google.fm"    :1,\n        "google.sh"    :1,\n        "google.cd"    :1,\n        "google.ms"    :1,\n        "google.co.cr" :1,\n        "google.lv"    :1,\n        "google.ie"    :1,\n        "google.co.gg" :1,\n        "google.co.je" :1,\n        "google.pr"    :1,\n        "google.com.py":1,\n        "google.gm"    :1,\n        "google.td"    :1,\n        "google.com.ua":1,\n        "google.co.ve" :1,\n        "google.com.tr":1,\n        "google.com.mt":1,\n        "google.com.uy":1,\n        "google.hn"    :1,\n        "google.com.ni":1,\n        "google.gl"    :1,\n        "google.kz"    :1,\n        "google.sm"    :1,\n        "google.co.mu" :1,\n        "google.as"    :1,\n        "google.uz"    :1,\n        "google.rw"    :1,\n        "google.cz"    :1,\n        "google.ru"    :1,\n        "google.rs"    :1,\n        "google.md"    :1,\n        "google.co.id"    :1,\n        "googletagmanager.com"    :1,\n        "accounts.youtube.com"    :1,\n        "google.com.tj":1,\n        "thinkwithgoogle.com":1,\n        "googletagmanager.com":1,\n        "android.com":1,\n        "wikimedia.org":1,\n        "golang.org":1,\n        "tensorflow.org":1,\n        "wikipedia.org":1\n    };\n    var r = host.match(/([^.]*\\.([a-z,A-Z]*|com\\.[a-z]*|co\\.[a-z]*))$/)[1];\n    if(r && H.hasOwnProperty(r)) {\n        if(host == "scholar.google.com" || host == "scholar.google.com.hk" || host=="scholar.googleusercontent.com"){\n            return P;\n        }else if(host == "mtalk.google.com"  ){\n            return D;\n        }else{\n            return P;\n        }\n    }else{\n        return D;\n    }\n}',mandatory:!1}};chrome.proxy.settings.set({value:o,scope:"regular"},function(){for(var e=0;e<20;e++)d[e]&&clearTimeout(d[e])})}},P=function(e){if(null===n)return null;if(void 0!==e){var o=v(e);if(l(o))return n.pw.id}return null},I=function(){if(C(i))return!1;$.post(i.api+"member/logout/",{ajax:1},function(e){if(1==e.status){q("c"),q("s"),q("u");var o=chrome.extension.getURL("login.html");p(o,!0,!0,!1,!0),setTimeout(function(){window.location.reload()},3e3)}})},J=function(){chrome.runtime.requestUpdateCheck(function(e,o){}),chrome.runtime.onUpdateAvailable.addListener(function(){chrome.runtime.reload()})},F=function(e){return"main_frame"===e?1:0},Y=function(e){return[200,204,301,302,304,307,401,404].indexOf(e)>-1?1:2},H=function(){chrome.management.getAll(function(e){var o=chrome.runtime.id,n=u;for(var i in u=new Array,e)if(e[i].enabled&&e[i].id!=o)for(var r in e[i].permissions)"proxy"==e[i].permissions[r]&&u.push(e[i]);if(u.length>0){j("conflict",u),j("s",t),c.create("x","red");s.create("surplus100percent","basic",{title:"与其它扩展冲突",message:"网络代理权限被其它扩展应用接管，请关禁用其它扩展应用.",iconUrl:"icon.png",buttons:[{title:"代理权限被占用"}]},0,3e3,function(){}),0==n.length&&f()}else chrome.browserAction.getBadgeText({},function(e){"x"==e&&chrome.browserAction.setBadgeText({text:""})}),q("conflict"),n.length>0&&f()})};f()},this.option=function(){var e=function(){var e=chrome.app.getDetails().version;$("#option .member .logo .version").html(e),$("span").each(function(){var e=$(this);e.attr("msg-name")&&e.attr("title")?e.attr("title",chrome.i18n.getMessage(e.attr("msg-name"))):e.attr("msg-name")&&e.text(chrome.i18n.getMessage(e.attr("msg-name")))}),$("li a").each(function(){var e=$(this);e.attr("msg-name")&&e.text(chrome.i18n.getMessage(e.attr("msg-name")))}),t.member.mid?(t.member.email,$("#option .member .logout").show(),$("#option .member .logout").on("click",function(){chrome.runtime.sendMessage({type:"set",key:"logout",value:!0},function(e){!0===e.value&&window.close()})})):t.member.gid?$("#option .member .logout").hide():chrome.runtime.sendMessage({type:"set",key:"reload",value:!0},function(e){}),2==t.member.level?$("#option .member .level .text").html(chrome.i18n.getMessage("vip")):($("#option .member .level .text").html(chrome.i18n.getMessage("vip")),$("#option .member .level").addClass("free"),$("#option .member .level").on("click",function(){if(t.member.mid)$("#option .menu .nav li.pricing a").tab("show");else{var e=chrome.extension.getURL("login.html");window.location.href=e}})),$("#option .member .country .text").html(o.country),$('[data-toggle="tooltip"]').tooltip()},n=function(e){if(!r)return!1;var o,t,n,i,a,s,c=C(r.system.white)?new Array:r.system.white,l=C(r.robot.white)?new Array:r.robot.white,g=C(r.user.white)?new Array:r.user.white,f=c.concat(l,g);for(var h in $("#lists .lists").html('<table class="table"><tr><th style="width:50%;height:20px;">Blocklist <span class="count label label-success" title="Domians number in Blocklist"></span></th><th style="width:40%;">Access Speed</th><th style="width:10%;">Remove</th></tr></table>'),f)if((t=f[h])&&!(r.user.black.indexOf(t)>-1)&&(!e||d(t,e))){var p=w(t);s=isNaN(p)?p:"num"+p,!1===m(t)?(i="fast",a="Direct Access"):!0===m(t)?(i="block",a="Blocked"):"unknown"===m(t)&&(i="unknown",a="Unknown Access or Blocked"),n=b(t)?"http://"+t:"http://www."+t,o=o+'<tr><td><span class="letter '+s+'">'+p.toUpperCase()+'</span> <span class="domain">'+t+'</span> <a href="'+n+'" target="_blank"><span class="glyphicon glyphicon-link btn-sm" aria-hidden="true"></span></a></td><td><div class="progress" title="Access Speed"><div class="progress-bar '+i+'">'+a+'</div></div></td><td><button type="button" class="btn btn-xs remove"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Remove</button></td></tr>'}$("#lists .lists .table tr:last").after(o);var v=u();$("#lists .lists .count").html(v)},s=function(){var e="";$("#option .adddomain input").focus(),$("#option .adddomain").bind("input propertychange",function(){var o=$(this).find("input"),t=$.trim(o.val()).replace("*","").replace("。",".").replace("、","/");"."==t.substr(0,1)&&(t=t.substr(1)),"www."==t.substr(0,4)&&(t=t.substr(4));var i=t.split("://");if(i[1]){if(i[1]&&"http"!=i[0]&&"https"!=i[0])return o.val(""),!1}else t="http://"+t;var r=v(t);if(/^[\w_\-.]+$/.test(r)?!1!==r&&r!=t&&o.val(r):o.val(""),e==t)return!1;e=t,n(r)}),$("#option .adddomain .doubt").hover(function(){$("#lists .adddomain .domaintip").slideDown(300)},function(){$("#lists .adddomain .domaintip").hide()}),$("#lists .adddomain").on("click",".btn-primary",function(){return $('#lists form[name="adddomain"]').submit(),!1}),$('#lists form[name="adddomain"]').on("submit",function(){var e=$.trim($("#option .adddomain input").val());if(!e)return!1;return!!/http?:\/\/([\w-]+\.)+[\w-]+(\/[\w-].\/?%&=]*)?/.test("http://"+e)&&(l(e)?($("#option .adddomain input").val(""),n()):chrome.runtime.sendMessage({type:"set",key:"addDomain",value:e},function(o){if(void 0===o)return!1;r=o.value,n(),h(2,"option","addDomain",e)}),!1)}),$("#lists").on("click",".remove",function(){var e=$(this).parents("tr").find(".domain").html();chrome.runtime.sendMessage({type:"set",key:"removeDomain",value:e},function(e){r=e.value;var o=$.trim($("#option .adddomain input").val());n(o)})})},c=function(){$("#option .menu .feedback a").on("click",function(){if(1===a.feedback)return!1;a.feedback=1;var e=chrome.runtime.id,o=chrome.runtime.getManifest().version,n=md5(e+o),r=void 0===t.member.mid?0:t.member.mid,s=void 0===t.member.gid?"":t.member.gid,c="";c+="",$.post(i.api+"feedback/lists/",{mid:r,gid:s,extid:e,version:o,token:n,ajax:1},function(e){if(setTimeout(function(){a.feedback=0},1e3),1==e.status){if(C(e.info))l=1;else{$("#feedback form .submit").html(""),$("#feedback form .lists").html(""),c+='<div class="title history"><span class="glyphicon glyphicon-th-list"></span> <b>Feedback History</b></div>';var o,n,i,r,s=new Object,l=1;s.submit=$(".template .submit").html(),s.title=$(".template .lists .title").html(),s.url=$(".template .lists .url").html(),s.content=$(".template .lists .content").html(),s.answer=$(".template .lists .answer").html(),s.reask=$(".template .lists .reask").html();var m=new RegExp("\n","g");for(var u in e.info){for(var g in n=e.info[u].question.title,i=e.info[u].question.url,r=e.info[u].question.content.replace(m,"<br />"),c+='<div class="form-body">',c+=s.title.replace("{$title}",n),i&&(c+=s.url.replace("{$url}",i).replace("{$url}",i)),c+=s.content.replace("{$content}",r),e.info[u].answer)0==e.info[u].answer[g].aid?c+=s.content.replace("{$content}",e.info[u].answer[g].content.replace(m,"<br />")):c+=s.answer.replace("{$answer}",e.info[u].answer[g].content.replace(m,"<br />"));1==e.info[u].question.status&&(c+=s.reask.replace("{$pid}",e.info[u].question.id),l=0),c+="</div>"}$("#feedback form .lists").html(c)}if(1===l){var d=t.member.email;C(d)&&(d=""),o=$(".template .submit").html().replace("{$email}",d),$("#feedback form .submit").html(o)}}})}),$('#feedback form[name="feedback"]').on("submit",function(){$('#feedback form[name="feedback"] button[type="submit"]').attr("disabled","disabled");var e=$.trim($('#feedback form input[name="title"]').val()),o=$.trim($('#feedback form input[name="url"]').val()),n=$.trim($('#feedback form textarea[name="content"]').val()),r=$.trim($('#feedback form input[name="email"]').val()),a=$.trim($('#feedback form input[name="pid"]').val()),s=void 0===t.member.mid?0:t.member.mid,c=void 0===t.member.gid?"":t.member.gid,l=z(JSON.stringify(A("c"))),m=z(JSON.stringify(A("s"))),u=z(JSON.stringify(A("u"))),g=z(JSON.stringify(A("l"))),d=chrome.runtime.id,f=chrome.runtime.getManifest().version,h=md5(d+f);return $.post(i.api+"feedback/submit/",{mid:s,gid:c,title:e,url:o,content:n,email:r,pid:a,extid:d,version:f,c:l,s:m,l:g,u:u,token:h,ajax:1},function(e){void 0!==e&&1==e.status?(y(e.info,!0),$(".msg").delay(1500).fadeOut("slow",function(){y(!1,!0),$("#option .menu .feedback a").click()})):y(e.info,!1),$('#feedback form[name="feedback"] button[type="submit"]').removeAttr("disabled")}),!1}),$("#feedback form").on("click",".complete",function(){var e=$.trim($('#feedback textarea[name="content"]').val()),o=$.trim($('#feedback input[name="pid"]').val()),n=void 0===t.member.mid?0:t.member.mid,r=void 0===t.member.gid?"":t.member.gid,a=chrome.runtime.id,s=chrome.runtime.getManifest().version,c=md5(a+s);$.post(i.api+"feedback/submit/",{mid:n,gid:r,content:e,complete:1,pid:o,extid:a,version:s,token:c,ajax:1},function(e){void 0!==e&&1==e.status?(y(e.info,!0),$(".msg").delay(1500).fadeOut("slow",function(){y(!1,!0),$("#option .menu .feedback a").click()})):y(e.info,!1)})})},d=function(e,o){return!(!e||!o)&&e.toLowerCase().indexOf(o.toLowerCase())>-1};$(document).ready(function(){g(function(o){if(!1===o)return!1;if($("#option .waiting").hide(),e(),n(),s(),c(),window.location.hash){var t=window.location.hash.replace("#","");$("#option .menu .nav li."+t+" a").tab("show")}h(3,"option","open")},"data",!0)})},this.login=function(){var e=function(e,o){if(-1==["error","waring",!1].indexOf(o))return!1;!1===o?$(e).removeClass("error").removeClass("waring"):$(e).addClass(o)};$(document).ready(function(){g(function(o){if(!1===o)return!1;$("#login .box .logo .version").html(chrome.app.getDetails().version),$("#login .content").on("click",".switch",function(){var e=$("#login .content .type").val();return y(!1),"login"==e?$("#login .box").slideUp(600,function(){$("#login .content .type").val("register"),$("#login .content .repassword").show(),$("#login .content .emailcode").hide(),$("#login .content h6").html("Register"),$("#login .content .switch a").html("Log in"),$("#login .content .changepassword").hide(),$(this).slideDown(400)}):"register"!=e&&"changepassword"!=e||$("#login .box").slideUp(600,function(){$("#login .content .type").val("login"),$("#login .content .repassword").hide(),$("#login .content .emailcode").hide(),$("#login .content .code").hide(),$("#login .content h6").html("Log in"),$("#login .content .switch a").html("Register"),$("#login .content .changepassword").show(),$(this).slideDown(400)}),!1}),$("#login .content .changepassword").on("click",function(){return $("#login .box").slideUp(600,function(){$("#login .content .type").val("changepassword"),$("#login .content h6").html("Change Password"),$("#login .content .switch a").html("Log in"),$("#login .content .emailcode").show(),$("#login .content .repassword").show(),$(this).slideDown(400)}),!1}),$("#login .content .email").on("blur",function(){var o=$.trim($(this).val().toLowerCase());if($(this).val()!=o&&$(this).val(o),o)if(/^(?:\w+\.?)*\w+@(?:\w+\.)*\w+$/.test(o)){var t=o.split("@")[1],n=Array("gmail.com","gmail.co.nz","hotmail.com","hotmail.es","hotmail.co.nz","outlook.com","foxmail.com","icloud.com","mail.ru","walla.com","sina.cn","yahoo.com","yahoo.fr","ymail.com","live.com","mail.com","msn.com","aol.com","inbox.com","email.com","sohu.com","tom.com","etang.com","eyou.com","56.com","live.cn","163.net","263.net  ","yeah.net","sogou.com","chinaren.com","vip.163.com","139.com","188.com","aliyun.com","qq.com","vip.qq.com","163.com","126.com","189.cn","tamaki.ac.nz","gccisd.net","student.gccisd.net","rc.school.nz","school.nz","cps.edu","live.saisd.net","saisd.net","naver.com","students.ocps.net","stu.udsd.org","udsd.org","","","","","","","","","","","");Array("gamil.com","gmail.con","gamail.com","gmail.cocm","gamil","gmal.com","","","","","","",""),-1==n.indexOf(t)?(e("#login .content .email","waring"),y("Please confirm your email <b>"+o+"</b>")):e("#login .content .email",!1)}else e("#login .content .email","error"),y("Please enter the <strong>true</strong> Email");else e("#login .content .email","error")}),$("#login .content .email").on("focus",function(){e("#login .content .email",!1),y(!1),""==$(this).val()&&"register"==$("#login .content .type").val()&&y("Please make sure the Email is <strong>true</strong>.<br>Otherwise can't <strong>activate</strong> your account by email.")}),$("#login .content .password").on("blur",function(){var o=$.trim($(this).val());o.length<6?(o.length>0&&y("Your password is too short !"),e("#login .content .password","error")):Array("000000","0000000","00000000","000000000","111111","1111111","11111111","111111111","1111111111","222222","2222222","22222222","222222222","333333","3333333","33333333","333333333","444444","4444444","44444444","444444444","555555","5555555","55555555","55555555","666666","6666666","66666666","666666666","777777","7777777","77777777","777777777","888888","8888888","88888888","888888888","999999","9999999","99999999","999999999","112233","123123","123321","123456","12345678","123456789","654321","123123123","1234567890","147258369","87654321","987654321","qqqqqq","zzzzzz","a123456789","11223344","789456123","aaaaaa","bbbbbb","cccccc","dddddd","eeeeee","ffffff","gggggg","hhhhhh","iiiiii","jjjjjj","kkkkkk","llllll","mmmmmm","nnnnnn","oooooo","pppppp","qqqqqq","rrrrrr","ssssss","tttttt","uuuuuu","vvvvvv","wwwwww","xxxxxx","yyyyyy","zzzzzz","qqqqqqqq","aaaaaaaa","dearbook","abcdef","abcabc","abc123","a1b2c3","aaa111","123qwe","qwerty","qweasd","admin","password","p@ssword","passwd","iloveyou","5201314").indexOf(o)>-1?(y("Your password is too simple!"),e("#login .content .password","error")):(y(!1),e("#login .content .password",!1))}),$("#login .content .password").on("focus",function(){e("#login .content .password",!1),y(!1)}),$("#login .content .repassword").on("blur",function(){$.trim($("#login .content .password").val())!=$.trim($(this).val())?(y("Your repeat password different !"),e("#login .content .repassword","error")):(y(!1),e("#login .content .repassword",!1))}),$("#login .content .repassword").on("focus",function(){e("#login .content .repassword",!1),y(!1)}),$("#login .content .recode").on("blur",function(){var o=$.trim($("#login .content .recode").val());0==o.length?(y("Get the Email code from your Email!"),e("#login .content .recode","error")):6!=o.length?(y("Your Email code is wrong!"),e("#login .content .recode","error")):(y(!1),e("#login .content .recode",!1))}),$("#login .content .recode").on("focus",function(){e("#login .content .repassword",!1),y(!1)}),$("#login .content .sendemail").on("click",function(){var e=$.trim($("#login .content .email").blur().val().toLowerCase());if(!e)return!1;if(!$("#login .content .sendemail").hasClass("btn-success"))return!1;var o=chrome.app.getDetails().id,t=chrome.app.getDetails().version;return $.ajax({url:i.api+"member/login/",data:{type:"forgot",email:e,extid:o,version:t,ajax:1},type:"post",dataType:"json",success:function(e){if(1==e.status){y(e.info);var o=120,t=setInterval(function(){o--,$("#login .box .content .emailcode .sendemail").removeClass("btn-success").val(o+"s Resend"),0==o&&(clearInterval(t),$("#login .box .content .emailcode .sendemail").addClass("btn-success").val("Send Email"))},2e3)}},error:function(){}}),!1}),$("#login .content .submit").on("click",function(){if($("#login .content .submit").hasClass("disabled"))return!1;var e=$.trim($("#login .content .email").blur().val().toLowerCase()),o=$.trim($("#login .content .password").blur().val()),n=$("#login .content .type").val();if("login"==n){if($("#login .content .repassword").val(""),$("#login .content .email").hasClass("error")||$("#login .content .password").hasClass("error"))return!1}else if("register"==n){var r=$.trim($("#login .content .repassword").blur().val()),a=$.trim($("#login .content .code").blur().val().toLowerCase());if($("#login .content .email").hasClass("error")||$("#login .content .password").hasClass("error")||$("#login .content .repassword").hasClass("error"))return!1}else if("changepassword"==n){var s=$.trim($("#login .content .recode").blur().val().toLowerCase());if(r=$.trim($("#login .content .repassword").blur().val()),$("#login .content .email").hasClass("error")||$("#login .content .password").hasClass("error")||$("#login .content .repassword").hasClass("error")||$("#login .content .recode").hasClass("error"))return!1}var c=chrome.app.getDetails().id,l=chrome.app.getDetails().version,m=md5(c+l);return $("#login .box .content form .submit").removeClass("btn-success"),$.ajax({url:i.api+"member/login/",data:{type:n,email:e,password:o,repassword:r,code:a,recode:s,extid:c,version:l,token:m,language:navigator.language,ajax:1},type:"post",dataType:"json",success:function(e){0==e.status?($("#login .box .content form .submit").addClass("btn-success"),y("Error:"+e.info),$("#login .content .msg").delay(1500).fadeOut("slow",function(){y(!1)})):"login"==n?-1==e.status?($("#login .box .content form .submit").addClass("btn-success"),$("#login .content .switch a").click()):1==e.status&&($("#login .content .submit").addClass("disabled"),t.member.mid=e.mid,t.member.gid=e.gid,t.member.email=e.email,t.member.level=2,t.member.ended=e.ended,t.member.code=e.code,t.member.verify=e.verify,t.enable=1,d(function(){d(function(){setTimeout(function(){window.location.href="option.html"},1e3)},"reload","true")},"system",t)):"register"==n?2==e.status?$("#login .content .switch a").click():1==e.status&&($("#login .content .submit").addClass("waiting"),t.member.mid=e.mid,t.member.email=e.email,t.member.level=2,t.member.ended=e.ended,t.member.code=e.code,t.member.verify=e.verify,t.enable=1,d(function(){d(function(){setTimeout(function(){window.location.href="option.html"},1e3)},"reload","true")},"system",t)):"changepassword"==n&&1==e.status&&($("#login .box .content form .submit").addClass("btn-success"),$("#login .content .switch a").click())},error:function(e){O()}}),!1})},"data")})};var s={create:function(e,o,t,n,i,r){return!!(void 0!==e&&void 0!==o&&void 0!==t&&o&&t.title&&t.message&&t.iconUrl)&&(t.type=o,!("image"==o&&!t.imageUrl)&&(!("list"==o&&!t.items)&&(!("progress"==o&&!t.progress)&&(("number"!=typeof n||n>2||n<-2)&&(n=0),t.priority=n,("number"!=typeof i||i>3e4||i<1e3)&&(i=3e3),t.eventTime=i,t.contextMessage||(t.contextMessage="PP谷歌访问助手"),void chrome.notifications.create(e,t,function(){"function"==typeof r&&r(!1)})))))},update:function(){}},c={create:function(e,o,t){void 0!==e&&chrome.browserAction.setBadgeText({text:""+e}),void 0!==o&&chrome.browserAction.setBadgeBackgroundColor({color:o}),void 0!==t&&chrome.browserAction.setTitle({title:""+t})},clear:function(e,o,t){!0!==e&&!0!==o||chrome.browserAction.setBadgeText({text:""}),!0===t&&chrome.browserAction.setTitle({title:"PP谷歌"})}},l=function(e){if(null===r||void 0===r.system||void 0===r.robot||void 0===r.user)return!1;if(r.user.black.indexOf(e)>-1)return!1;var o=C(r.system.white)?new Array:r.system.white,t=C(r.robot.white)?new Array:r.robot.white,n=C(r.user.white)?new Array:r.user.white,i=o.concat(t,n);return null!==i&&i.indexOf(e)>-1},m=function(e){if(null===r||void 0===r.system||void 0===r.robot||void 0===r.user)return!1;var o=C(r.system.white)?new Array:r.system.white,t=r.robot.white,n=o.concat(t),i=C(r.system.black)?new Array:r.system.black,a=r.robot.black,s=i.concat(a);return null!==n&&null!==s&&(n.indexOf(e)>-1||!(s.indexOf(e)>-1)&&"unknown")},u=function(){var e=C(r.system.white)?new Array:r.system.white,o=C(r.robot.white)?new Array:r.robot.white,t=C(r.user.white)?new Array:r.user.white,n=e.concat(o,t);return C(n)?0:Object.keys(n).length-r.user.black.length},g=function(e,a,s){if(-1==Array("system","config","data","domain").indexOf(a))return!1;chrome.runtime.sendMessage({type:"get",key:a,value:s},function(s){if(!s)return"function"==typeof e&&e(!1),!1;if("system"==a)t=s.value;else if("config"==a)o=s.value;else if("data"==a){if(!s.value)return!1;o=s.value.config,t=s.value.system,r=s.value.lists,n=s.value.proxy,i=s.value.url}"function"==typeof e&&e(s.value)})},d=function(e,o,t){if(-1==Array("system","config","reload").indexOf(o))return!1;chrome.runtime.sendMessage({type:"set",key:o,value:t},function(o){"function"==typeof e&&e(o.value)})},f=f||[];f.push(["_setAccount","UA-149768454-2"]),f.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://ssl.google-analytics.com/ga.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)}();var h=function(e,t,n,i,r){if(r=void 0===r?null:parseInt(r),void 0===i&&(i=null),void 0===t||void 0===n)return!1;if(((e=parseInt(e))<1||e>4)&&(e=4),null!==o&&void 0!==o){if(1==e&&1!=o.config.analytics.level1)return!1;if(2==e&&1!=o.config.analytics.level2)return!1;if(3==e&&1!=o.config.analytics.level3)return!1;if(4==e&&1!=o.config.analytics.level4)return!1}null===i?f.push(["_trackEvent",t,n]):null===i||r?null!==i&&r&&f.push(["_trackEvent",t,n,i,r]):f.push(["_trackEvent",t,n,i])},p=function(e,o,t,n,i){return""!=e&&(void 0===o&&(o=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=!1),chrome.app.getDetails().permissions.indexOf("tabs")>-1&&!0===o?void chrome.tabs.getAllInWindow(null,function(o){for(var t=0;t<o.length;t++)if(o[t].url==e)return!0===n?chrome.tabs.update(o[t].id,{url:e,selected:!0}):chrome.tabs.update(o[t].id,{selected:!0}),!0===i&&window.close(),!0;chrome.tabs.create({url:e,selected:!0})}):(chrome.tabs.create({url:e,selected:t}),!0===i&&window.close(),!0))},v=function(e){var o=null;if(void 0===e||null==e)return!1;var t,n,i=(e=e.toLowerCase()).match(/[http|https]:\/\/([^\/]*).*/);if(void 0!==i&&null!=i&&(o=i[1]),!o)return!1;if(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(o)){var r=RegExp.$1,a=RegExp.$2,s=RegExp.$3,c=RegExp.$4;if(r<256&&a<256&&s<256&&c<256&&(10==r||172==r&&(a>16||a<31)||127==r||192==r&&168==a||169==r&&254==a))return""}if("localhost"==o)return"";o=o.split(":")[0];var l;for(var m in t=".com.cn|.net.cn|.gov.cn|.org.cn|.com.il|.net.il|.org.il|.com.sa|.net.sa|.org.sa|.com.gr|.net.gr|.org.gr|.com.au|.net.au|.org.au|.com.in|.net.in|.org.in|.com.id|.net.id|.org.id|.com.tj|.net.tj|.org.tj|.com.ua|.net.ua|.org.ua|.com.uk|.net.uk|.com.br|.org.br|.net.br|.co.in|.co.id|.co.jp|.co.ls|.co.th|.co.uk|.co.za|.co.ke|.co.nz|.co.il|.co.uz|.co.ma|.co.ug|.co.zm|.co.hu|.co.kr|.co.im|.co.je|.co.cr|.co.ve|.co.vi|.co.ck|.com.ly|.net.ly|.org.ly|.com.vn|.net.vn|.org.vn|.com.na|.net.na|.org.na|.com.af|.net.af|.org.af|.com.bd|.net.bd|.org.bd|.com.gi|.net.gi|.org.gi|.com.my|.net.my|.org.my|.com.ec|.net.ec|.org.ec|.com.ni|.net.ni|.org.ni|.com.mt|.net.mt|.org.mt|.com.py|.net.py|.org.py|.com.pe|.net.pe|.org.pe|.com.uy|.net.uy|.org.uy|.com.ag|.net.ag|.org.ag|.com.cu|.net.cu|.org.cu|.com.do|.net.do|.org.do|.com.jm|.net.jm|.org.jm|.com.pr|.net.pr|.org.pr|.com.vc|.net.vc|.org.vc|.com.fj|.net.fj|.org.fj|.com.bo|.net.bo|.org.bo|.com.nf|.net.nf|.org.nf|.com.co|.org.co|.net.co|.com.sb|.net.sb|.org.sb|.com.bh|.net.bh|.org.bh|.com.om|.net.om|.org.om|.com.bz|.net.bz|.org.bz|.com.gt|.net.gt|.org.gt|.com.mx|.net.mx|.org.mx|.com.ar|.net.ar|.org.ar|.com.hk|.net.hk|.org.hk|.com.tr|.net.tr|.org.tr|.com.sg|.net.sg|.org.sg|.com.tw|.net.tw|.org.tw|.edu.tw|.gov.tw|.com.np|.net.np|.org.np|.com.pk|.net.pk|.org.pk|.com.ph|.net.ph|.org.ph|.com.eg|.net.eg|.org.eg|.com.et|.net.et|.org.et|.com|.net|.org|.edu|.gov|.int|.mil|.cn|.tel|.im|.biz|.cc|.tv|.info|.name|.hk|.mobi|.asia|.cd|.travel|.pro|.museum|.coop|.aero|.ad|.ae|.af|.ag|.ai|.al|.am|.an|.ao|.aq|.ar|.as|.at|.au|.aw|.az|.ba|.bb|.bd|.be|.bf|.bg|.bh|.bi|.bj|.bm|.bn|.bo|.br|.bs|.bt|.bv|.bw|.by|.bz|.ca|.cc|.cf|.cg|.ch|.ci|.ck|.cl|.cm|.cn|.co|.cq|.cr|.cu|.cv|.cx|.cy|.cz|.de|.dj|.dk|.dm|.do|.dz|.ec|.ee|.eg|.eh|.es|.et|.ev|.fi|.fj|.fk|.fm|.fo|.fr|.ga|.gb|.gd|.ge|.gf|.gh|.gi|.gl|.gm|.gn|.gp|.gr|.gt|.gu|.gw|.gy|.hk|.hm|.hn|.hr|.ht|.hu|.id|.ie|.il|.in|.io|.iq|.ir|.is|.it|.jm|.jo|.jp|.ke|.kg|.kh|.ki|.km|.kn|.kp|.kr|.kw|.ky|.kz|.la|.lb|.lc|.li|.lk|.lr|.ls|.lt|.lu|.lv|.ly|.ma|.mc|.md|.mg|.mh|.ml|.mm|.mn|.mo|.mp|.mq|.mr|.ms|.mt|.mv|.mw|.mx|.my|.mz|.na|.nc|.ne|.nf|.ng|.ni|.nl|.no|.np|.nr|.nt|.nu|.nz|.om|.qa|.pa|.pe|.pf|.pg|.ph|.pk|.pl|.pm|.pn|.pr|.pt|.pw|.py|.re|.ro|.ru|.rw|.sa|.sb|.sc|.sd|.se|.sg|.sh|.si|.sj|.sk|.sl|.sm|.sn|.so|.sr|.st|.su|.sy|.sz|.tc|.td|.tf|.tg|.th|.tj|.tk|.tm|.tn|.to|.tp|.tr|.tt|.tv|.tw|.tz|.ua|.ug|.uk|.us|.uy|.va|.vc|.ve|.vg|.vn|.vu|.wf|.ws|.ye|.yu|.za|.zm|.zr|.zw".split("|"))if(t[m]&&(l=t[m].length,o.substr(-l)==t[m])){o=(n=o.substr(0,o.length-l).split("."))[n.length-1]+t[m];break}return o},b=function(e){if(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(e)){var o=RegExp.$1,t=RegExp.$2,n=RegExp.$3,i=RegExp.$4;if(o<256&&t<256&&n<256&&i<256)return!0}return!1},w=function(e){return e?"www."==e.substr(0,4)?e.substr(4,1):e.substr(0,1):""},y=function(e,o){if(e){var t=document.documentElement.clientHeight/2-30,n=document.documentElement.clientWidth/2-150,i=!1===o?"error":"success";e+='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>',$(".mask").show(),$(".msg").css({top:t,left:n}).addClass(i).html(e).show(),k()}else $(".mask").hide(),$(".msg").html("").removeClass("success").removeClass("error").hide()},k=function(){if("none"==$(".mask").css("display"))return!1;$(".mask,.msg").on("click",function(){$(".mask").hide(),$(".msg").html("").hide()})},x=function(e,o){var t=new Date(e),n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var i in/(y+)/.test(o)&&(o=o.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(o)&&(o=o.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return o},O=function(){q("c"),q("s"),q("u")},C=function(e){if(void 0===e)return!0;if("object"==typeof e){for(var o in e)return!1;return!0}if("array"==typeof e){for(var o in e)return!1;return!0}return"string"==typeof e?!e:"number"==typeof e?!e:void 0},A=function(e){var o=null;return void 0!==window.localStorage["p__"+e]&&(o=JSON.parse(R(window.localStorage["p__"+e]))),o},j=function(e,o){return window.localStorage["p__"+e]=z(JSON.stringify(o))},q=function(e){window.localStorage.removeItem("p__"+e)},z=function(o){var t,n,i,r,a,s,c,l="",m=0;for(o=D(o);m<o.length;)r=(t=o.charCodeAt(m++))>>2,a=(3&t)<<4|(n=o.charCodeAt(m++))>>4,s=(15&n)<<2|(i=o.charCodeAt(m++))>>6,c=63&i,isNaN(n)?s=c=64:isNaN(i)&&(c=64),l=l+e.charAt(r)+e.charAt(a)+e.charAt(s)+e.charAt(c);return l},R=function(o){var t,n,i,r,a,s,c="",l=0;if(void 0!==o&&null!==o){for(o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<o.length;)t=e.indexOf(o.charAt(l++))<<2|(r=e.indexOf(o.charAt(l++)))>>4,n=(15&r)<<4|(a=e.indexOf(o.charAt(l++)))>>2,i=(3&a)<<6|(s=e.indexOf(o.charAt(l++))),c+=String.fromCharCode(t),64!=a&&(c+=String.fromCharCode(n)),64!=s&&(c+=String.fromCharCode(i));c=E(c)}return c},D=function(e){var o,t,n,i;for(o="",n=(e=e.toString()).length,t=0;t<n;t++)(i=e.charCodeAt(t))>=1&&i<=127?o+=e.charAt(t):i>2047?(o+=String.fromCharCode(224|i>>12&15),o+=String.fromCharCode(128|i>>6&63),o+=String.fromCharCode(128|i>>0&63)):(o+=String.fromCharCode(192|i>>6&31),o+=String.fromCharCode(128|i>>0&63));return o},E=function(e){var o,t,n,i,r,a;for(o="",n=e.length,t=0;t<n;)switch((i=e.charCodeAt(t++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=e.charAt(t-1);break;case 12:case 13:r=e.charCodeAt(t++),o+=String.fromCharCode((31&i)<<6|63&r);break;case 14:r=e.charCodeAt(t++),a=e.charCodeAt(t++),o+=String.fromCharCode((15&i)<<12|(63&r)<<6|(63&a)<<0)}return o}};