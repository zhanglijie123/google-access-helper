var MZK_BGS=chrome.extension.getBackgroundPage();function change_connect_model(n){MZK_BGS.mzk_is_connect&&n&&MZK_BGS.open_vpn()}function Resume_vpn_display_status(){MZK_BGS.mzk_is_connect?(MZK_BGS.open_vpn(),turnOn()):(MZK_BGS.close_vpn(),turnOff())}function clickHandler(){if(MZK_BGS.mzk_is_connect)MZK_BGS.close_vpn(function(){turnOff()});else{if(!MZK_BGS.mzk_server_id)return alert("未获取到服务器"),!1;MZK_BGS.open_vpn(),turnOn()}}const toggle=document.querySelector("#toggle"),turnOn=()=>{$("#mzk_home_link_text").html(MZK_BGS.get_lan_msg("connected")),$("#toggle").attr("checked",!0)},turnOff=()=>{$("#mzk_home_link_text").html(MZK_BGS.get_lan_msg("click_connect")),$("#toggle").attr("checked",!1)};function lang_init(){$("[class^='lang_']").each(function(n){var e=$(this).attr("class").toString();e=e.split(" ",1)[0].replace(/^lang_/,""),$(this).text(MZK_BGS.get_lan_msg(e))})}$(document).ready(function(){lang_init();var n=null;if(void 0!==window.localStorage.conflict_info&&(n=JSON.parse(window.localStorage.conflict_info)),n){if($("#pop_content").hide(),$("#pop_conflict").show(),n&&n.length>0){var e="";for(var t in n)e+='<li id="'+n[t].id+'" class="list-group-item"><img src="'+n[t].icons[0].url+'" width="16"> '+n[t].name+"</li>";$("#pop_conflict #header ul").html(e)}$("#openExtensions").click(function(){chrome.tabs.create({url:"chrome://extensions/"})}),$("#disableExtensions").click(function(){for(var e in n)chrome.management.setEnabled(n[e].id,!1,function(){});window.location.reload()})}else $("#pop_content").show(),$("#pop_conflict").hide(),$("#banben").text(chrome.runtime.getManifest().version),$("#toggle").on("change",function(){clickHandler()}),$("#refresh").on("click",function(){chrome.tabs.create({url:chrome.runtime.getURL("switch.html")})}),MZK_BGS.mzk_select_server_info?Resume_vpn_display_status():MZK_BGS.get_default_server(function(){Resume_vpn_display_status(),MZK_BGS.open_vpn(),turnOn()})});