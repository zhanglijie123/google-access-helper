var chromeVersion=navigator.appVersion.match(/Chrome\/(\d+)\./);chromeVersion=chromeVersion?parseInt(chromeVersion[1]):0;var opt_extraInfoSpec=["blocking","requestHeaders"].concat(chromeVersion>=72?["extraHeaders"]:[]),conflict=new Array,visit=new Object,notify={create:function(e,t,o,_,n,i){return!!(void 0!==e&&void 0!==t&&void 0!==o&&t&&o.title&&o.message&&o.iconUrl)&&(o.type=t,!("image"==t&&!o.imageUrl)&&(!("list"==t&&!o.items)&&(!("progress"==t&&!o.progress)&&(("number"!=typeof _||_>2||_<-2)&&(_=0),o.priority=_,("number"!=typeof n||n>3e4||n<1e3)&&(n=3e3),o.eventTime=n,o.contextMessage||(o.contextMessage="PP谷歌访问助手"),void chrome.notifications.create(e,o,function(){"function"==typeof i&&i(!1)})))))},update:function(){}},mzk_config={base_domain:"https://service.shyonghui.xyz/",app_ver:"1.0.0",browser_ver:"",device_name:"chrome",curr_server_id:"",lang:chrome.i18n.getUILanguage(),api_ver:"1.0",uninstall_url:"https://www.wenjuan.com/s/2yUbm2/",is_ff_privateBrowsingAllowed:!1},mzk_pac_config={cnips:{data:[],last_update:"20200108"},system_proxydomain:{data:[],last_update:"20200206"},direct_domain:{data:[],last_update:"20200401"},free_proxydomain:{data:[],last_update:"20200206"},user_custom_proxydomain:{data:[],last_update:"20200108"},user_custom_bypassdomain:{data:[],last_update:"20200210"},geoip_data:"",smart_pac_template:"",smart_online_template:{data:"",last_update:"20200224"},free_pac_template:"",global_pac_template:"",testdomain:{},test_pac_domain:[],auto_test_server_rank:[],geoip_switch:!0},mzk_user_token="",mzk_is_connect=!1,mzk_select_server_info=!1,mzk_connect_mode="smart",mzk_user_info={},mzk_server_id="";function generate_chrome_pacdata(){var e=new URL(mzk_config.base_domain);if("global"==mzk_connect_mode&&mzk_user_info.is_vip){var t=mzk_pac_config.global_pac_template;(_={})[e.hostname]=1,t=(t=(t=t.replace("__CN_IPS__","[]")).replace("__DIRECT_DOMAINS__",JSON.stringify(_))).replace("__DOMAINS__","{}")}else{var o={};if(mzk_user_info.is_vip){if(mzk_pac_config.smart_online_template.data)t=mzk_pac_config.smart_online_template.data;else t=mzk_pac_config.smart_pac_template;o=(o=mzk_pac_config.system_proxydomain.data).concat(mzk_pac_config.user_custom_proxydomain.data);var _=mzk_pac_config.direct_domain.data;mzk_pac_config.user_custom_bypassdomain.data.length>0&&(_=_.concat(mzk_pac_config.user_custom_bypassdomain.data)),_.includes(e.hostname)||_.push(e.hostname),t=t.replace("__DIRECT_DOMAINS__",JSON.stringify(_.filter(onlyUniqueArray))),t=mzk_pac_config.geoip_switch?(t=t.replace("__GEOIP_LIST__",mzk_pac_config.geoip_data)).replace("__CN_IPS_SWITCH__","true"):(t=t.replace("__GEOIP_LIST__","[]")).replace("__CN_IPS_SWITCH__","false")}else{var t=mzk_pac_config.free_pac_template;o=mzk_pac_config.free_proxydomain.data,t=(t=t.replace("__DIRECT_DOMAINS__","{}")).replace("__CN_IPS__","[]")}t=t.replace("__DOMAINS__",JSON.stringify(o))}return t=(t=Object.keys(mzk_pac_config.test_pac_domain).length>0?t.replace("__TESTDOMAIN__",JSON.stringify(mzk_pac_config.test_pac_domain)):t.replace("__TESTDOMAIN__","{}")).replace("__PROXY__",mzk_select_server_info.address)}function applyChanges(e,t){switch(mzk_config.device_name){case"edge":case"chrome":var o=(_=new Mzk_Chrome_proxy).generateProxyConfig(e,generate_chrome_pacdata());_.applyChanges(o,t);break;case"firefox":var _=new Mzk_Firefox_proxy,n=mzk_config.base_domain+"chromeext/pac/show/token/"+mzk_user_token+"?sid="+mzk_select_server_info.line_sn+"&pmode="+mzk_connect_mode+"&geoip="+mzk_pac_config.geoip_switch+"&rd="+Math.random().toString(),i=(o=_.generateProxyConfig(e,n),mzk_select_server_info.address.split(/HTTPS ([^;]+)/g)[1].split(":"));mzk_select_server_info.ff_server={server:i[0],port:i[1]},_.applyChanges(o,t)}}chrome.storage.local.get(["mzk_is_connect","mzk_server_id","mzk_select_server_info","uinfo","mzk_geoip_switch"],function(e){checkConflict(),checkExtension(),Mzk_iTestSpeed.GetCurrentIpinfo(),mzk_is_connect=e.mzk_is_connect,mzk_server_id=e.mzk_server_id,e.mzk_select_server_info&&(mzk_select_server_info=e.mzk_select_server_info),void 0!==e.mzk_geoip_switch&&(mzk_pac_config.geoip_switch=e.mzk_geoip_switch),e.uinfo&&(mzk_user_info=JSON.parse(e.uinfo));var t=getFirefoxVersion();t?(mzk_config.device_name="firefox",mzk_config.browser_ver=t,check_firefox_privateBrowsingAllowed()):navigator.userAgent.match(/Edg\/([0-9]+)\./)?(t=getEdgeVersion(),mzk_config.device_name="edge",mzk_config.browser_ver=t):navigator.userAgent.match(/OPR\/([0-9]+)\./)?(t=getOperaVersion(),mzk_config.device_name="opera",mzk_config.browser_ver=t):mzk_config.browser_ver=getChromeVersion();chrome.runtime.getManifest();mzk_config.app_ver="1.7.1",get_user_token(function(){load_default_data(),mzk_is_connect?open_vpn():get_default_server(function(){open_vpn()})})});class Mzk_Chrome_proxy{applyChanges(e,t){chrome.proxy.settings.set({value:e,scope:"regular"},t)}generateProxyConfig(e,t){switch(e){case"system":return{mode:"system"};case"production":if(t?window.localStorage.setItem("pac_cache",btoa(t)):t=atob(window.localStorage.getItem("pac_cache")),t)return{mode:"pac_script",pacScript:{data:t,mandatory:!0}}}return{mode:"system"}}}class Mzk_iTestSpeed{static RunTestspeed(){if(void 0===Mzk_iTestSpeed.task_count&&(Mzk_iTestSpeed.task_count=0),!(Mzk_iTestSpeed.task_count>0||"smart"!=mzk_select_server_info.line_mode)&&(Mzk_iTestSpeed.task_count=Object.keys(mzk_pac_config.test_pac_domain).length,Mzk_iTestSpeed.task_count>2&&mzk_is_connect)){var e=new Ping({favicon:"/img/128ico.png",timeout:3e3});mzk_pac_config.auto_test_server_rank=[],Mzk_iTestSpeed.top_server=[],$.each(mzk_pac_config.testdomain,function(t,o){e.ping("http://"+o.testdomain,function(e,t){if(null!==e)mzk_pac_config.auto_test_server_rank.push({server:o.server,ranking:t,result:e});else{var _=Math.round(t*o.load);_<3e3&&(mzk_pac_config.auto_test_server_rank.push({server:o.server,ranking:t,result:"ok"}),Mzk_iTestSpeed.top_server.push({server:o.server,ranking:_,result:"ok"}))}Mzk_iTestSpeed.task_count>0&&Mzk_iTestSpeed.task_count--})})}}static Start(e){if(void 0===mzk_select_server_info.address||"smart"!=mzk_select_server_info.line_mode||Mzk_iTestSpeed.task_count>0)return!1;Mzk_iTestSpeed.curr_top_ranking_server=void 0,Mzk_iTestSpeed.RunTestspeed(),void 0===e?(chrome.alarms.create("TestSpeed_Run",{delayInMinutes:1}),void 0===Mzk_iTestSpeed.ipinfo&&Mzk_iTestSpeed.GetCurrentIpinfo(),Mzk_iTestSpeed.last_test_user_isvip=mzk_user_info.is_vip):chrome.alarms.create("TestSpeed_ApplyVPN",{delayInMinutes:1})}static ApplyVPN(){if(!(Object.keys(mzk_pac_config.auto_test_server_rank).length<1||Mzk_iTestSpeed.top_server.length<2||void 0!==Mzk_iTestSpeed.last_test_user_isvip&&Mzk_iTestSpeed.last_test_user_isvip!=mzk_user_info.is_vip))if(Mzk_iTestSpeed.top_server.sort(Mzk_iTestSpeed.compare("ranking")),Mzk_iTestSpeed.curr_top_ranking_server=Mzk_iTestSpeed.top_server.slice(0,2),Mzk_iTestSpeed.curr_top_ranking_server[0].server!=Mzk_iTestSpeed.curr_top_ranking_server[1].server){if(!(Object.keys(Mzk_iTestSpeed.curr_top_ranking_server).length<2)){var e="HTTPS "+Mzk_iTestSpeed.curr_top_ranking_server[0].server+";HTTPS "+Mzk_iTestSpeed.curr_top_ranking_server[1].server+";";if(void 0!==mzk_select_server_info.address&&"smart"==mzk_select_server_info.line_mode){if(e==mzk_select_server_info.address)return;mzk_select_server_info.address=e,chrome.storage.local.set({mzk_select_server_info:mzk_select_server_info}),mzk_is_connect&&("firefox"==mzk_config.device_name?Mzk_iTestSpeed.SendReport(function(){open_vpn()}):open_vpn())}}}else Mzk_iTestSpeed.curr_top_ranking_server=void 0}static SendReport(e){MZK_getJSON_DATA("chromeext/pac/report_testspeed",{ipinfo:JSON.stringify(Mzk_iTestSpeed.ipinfo),sid:mzk_select_server_info.line_sn,report:JSON.stringify(mzk_pac_config.auto_test_server_rank),top_server:JSON.stringify(Mzk_iTestSpeed.curr_top_ranking_server)},function(t){"ok"==t.result?e&&e():console.log(t.msg)})}static GetCurrentIpinfo(){$.post("http://ip.taobao.com/outGetIpInfo",{ip:"myip",accessKey:"alibaba-inc"},function(e){Mzk_iTestSpeed.ipinfo=e,window.localStorage.setItem("geoip_info",JSON.stringify(e))},"json").fail(function(){var e=window.localStorage.getItem("geoip_info");e&&(Mzk_iTestSpeed.ipinfo=JSON.parse(e))})}static compare(e){return function(t,o){return t[e]-o[e]}}}function getChromeVersion(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return!!e&&parseInt(e[2],10)}function getFirefoxVersion(){var e=navigator.userAgent.match(/Firefox\/([0-9]+)\./);return!!e&&parseInt(e[1],10)}function getEdgeVersion(){var e=navigator.userAgent.match(/Edg\/([0-9]+)\./);return!!e&&parseInt(e[1],10)}function getOperaVersion(){var e=navigator.userAgent.match(/OPR\/([0-9]+)\./);return!!e&&parseInt(e[1],10)}function check_firefox_privateBrowsingAllowed(e){chrome.management.get(chrome.runtime.id,function(t){mzk_config.is_ff_privateBrowsingAllowed=t.permissions.includes("internal:privateBrowsingAllowed"),e&&e(data)})}function load_default_data(){var e;(get_localdb_cache("proxydomain",mzk_pac_config.system_proxydomain,function(e){mzk_pac_config.system_proxydomain=e}),get_localdb_cache("freedomain",mzk_pac_config.free_proxydomain,function(e){mzk_pac_config.free_proxydomain=e}),get_localdb_cache("directdomain",mzk_pac_config.direct_domain,function(e){mzk_pac_config.direct_domain=e}),localStorage.getItem("localcache_usercustomdomain"))&&((e=JSON.parse(localStorage.getItem("localcache_usercustomdomain"))).data=JSON.parse(atob(e.data)),mzk_pac_config.user_custom_proxydomain.data=e.data);localStorage.getItem("localcache_userbypassdomain")&&((e=JSON.parse(localStorage.getItem("localcache_userbypassdomain"))).data=JSON.parse(atob(e.data)),mzk_pac_config.user_custom_bypassdomain.data=e.data);$.get(chrome.extension.getURL("/localdb/smart_pac_v2"),function(e){mzk_pac_config.smart_pac_template=e}),$.get(chrome.extension.getURL("/localdb/geoip.txt"),function(e){mzk_pac_config.geoip_data=e}),$.get(chrome.extension.getURL("/localdb/free-pac-template"),function(e){mzk_pac_config.free_pac_template=e}),$.get(chrome.extension.getURL("/localdb/global-pac-template"),function(e){mzk_pac_config.global_pac_template=e})}function get_user_token(e){chrome.storage.local.get(["mzk_token","uinfo"],function(t){t.mzk_token&&t.uinfo?e&&e():auto_register(function(){e&&e()}),mzk_user_token=t.mzk_token})}function auto_register(e){MZK_getJSON_DATA("chromeext/muser/auto_login",{reg_hash:md5("ncldcbhpeplkfijdhnoepdgdnmjkckij"+navigator.userAgent)},function(t){"ok"==t.result&&(chrome.storage.local.set({mzk_token:t.token_key,uinfo:JSON.stringify(t.uinfo)},function(){e&&e()}),mzk_user_token=t.token_key,mzk_user_info=t.uinfo,mzk_select_server_info=!1,mzk_server_id="")})}var mzk_backup_server=["https://service.jjxiangya.xyz/","https://service.shyonghui.xyz/","https://service.qqwx6.xyz:8443/","https://api.iggservice.xyz/"];function MZK_getJSON_DATA(e,t,o){t||(t={}),t.appver="1.1.7",t.device_name=mzk_config.device_name,t.token=mzk_user_token,t.curr_server_id=mzk_config.curr_server_id,t.runtime_id="ncldcbhpeplkfijdhnoepdgdnmjkckij",t.lang=mzk_config.lang,$.ajax({url:mzk_config.base_domain+e,type:"POST",dataType:"json",data:t,tryCount:0,retryLimit:4,success:function(e){void 0!==e.msgtype&&void 0!==e.msgdata&&"Encrypt"==e.msgtype&&(e=JSON.parse(CryptoJSAesDecrypt(e.msgdata))),o&&o(e)},error:function(t,o,_){var n=o+", "+_;if(console.log("Err:"+n),this.tryCount++,this.tryCount<=this.retryLimit)return this.url=mzk_backup_server[this.tryCount]+e,void $.ajax(this);if(!/getsession/gim.test(e)){n=o+", "+_;console.log("error_network")}}})}function CryptoJSAesDecrypt(e){var t=JSON.parse(e),o=t.ciphertext,_=CryptoJS.enc.Hex.parse(t.salt),n=CryptoJS.enc.Hex.parse(t.iv),i=CryptoJS.PBKDF2(mzk_user_token,_,{hasher:CryptoJS.algo.SHA512,keySize:8,iterations:999});return CryptoJS.AES.decrypt(o,i,{iv:n}).toString(CryptoJS.enc.Utf8)}function get_localdb_cache(e,t,o){var _=localStorage.getItem("localcache_"+e);_?((t=JSON.parse(_)).data=JSON.parse(atob(t.data)),o&&o(t)):$.get(chrome.extension.getURL("/localdb/"+e+".txt"),function(_){t.data=JSON.parse(atob(_)),set_localdb_cache(e,_,t.last_update),o&&o(t)})}function set_localdb_cache(e,t,o){localStorage.setItem("localcache_"+e,JSON.stringify({data:t,last_update:o}))}function checkConflict(){chrome.management.getAll(function(e){var t=chrome.runtime.id,o=new Array;for(var _ in e)if(e[_].enabled&&e[_].id!=t)for(var n in e[_].permissions)"proxy"==e[_].permissions[n]&&o.push(e[_]);if(o.length>0){window.localStorage.setItem("conflict_info",JSON.stringify(o)),chrome.browserAction.setBadgeText({text:"x"}),chrome.browserAction.setBadgeBackgroundColor({color:"red"});notify.create("surplus100percent","basic",{title:"与其它扩展冲突",message:"网络代理权限被其它扩展应用接管，请关禁用其它扩展应用.",iconUrl:"img/icon.png",buttons:[{title:"代理权限被占用"}]},0,3e3,function(){})}else chrome.browserAction.getBadgeText({},function(e){"x"==e&&chrome.browserAction.setBadgeText({text:""})}),window.localStorage.removeItem("conflict_info")})}function checkExtension(){chrome.management.onEnabled.addListener(function(e){checkConflict()}),chrome.management.onDisabled.addListener(function(e){checkConflict()}),chrome.management.onInstalled.addListener(function(e){checkConflict()}),chrome.management.onUninstalled.addListener(function(e){checkConflict()})}class Mzk_Kepplive_Service{static sync_online_data(e){e.free_doamin_update!==mzk_pac_config.free_proxydomain.last_update&&update_onlinedata_tolocal("freedomain",function(t){mzk_pac_config.free_proxydomain.last_update=e.free_doamin_update,mzk_pac_config.free_proxydomain.data=t,set_localdb_cache("freedomain",btoa(JSON.stringify(t)),mzk_pac_config.free_proxydomain.last_update)}),e.system_proxy_doamin_update!==mzk_pac_config.system_proxydomain.last_update&&update_onlinedata_tolocal("proxydomain",function(t){mzk_pac_config.system_proxydomain.last_update=e.system_proxy_doamin_update,mzk_pac_config.system_proxydomain.data=t,set_localdb_cache("proxydomain",btoa(JSON.stringify(t)),mzk_pac_config.system_proxydomain.last_update)}),e.user_custom_doamin_update!==mzk_pac_config.user_custom_proxydomain.last_update&&update_onlinedata_tolocal("usercustomdomain",function(t){mzk_pac_config.user_custom_proxydomain.last_update=e.user_custom_doamin_update,mzk_pac_config.user_custom_proxydomain.data=t,set_localdb_cache("usercustomdomain",btoa(JSON.stringify(t)),mzk_pac_config.user_custom_proxydomain.last_update)}),e.direct_doamin_update!==mzk_pac_config.direct_domain.last_update&&update_onlinedata_tolocal("directdomain",function(t){mzk_pac_config.direct_domain.last_update=e.direct_doamin_update,mzk_pac_config.direct_domain.data=t,set_localdb_cache("directdomain",btoa(JSON.stringify(t)),mzk_pac_config.direct_domain.last_update)}),e.custom_bypassdoamin_update!==mzk_pac_config.user_custom_bypassdomain.last_update&&update_onlinedata_tolocal("userbypasstdomain",function(t){mzk_pac_config.user_custom_bypassdomain.last_update=e.custom_bypassdoamin_update,mzk_pac_config.user_custom_bypassdomain.data=t,set_localdb_cache("userbypasstdomain",btoa(JSON.stringify(t)),mzk_pac_config.user_custom_bypassdomain.last_update)}),"smart"==mzk_select_server_info.line_mode&&mzk_user_info.is_vip&&"firefox"!=mzk_config.device_name&&(e.smart_pac_update==mzk_pac_config.smart_online_template.last_update&&mzk_pac_config.smart_online_template.data||(mzk_pac_config.smart_online_template.last_update=e.smart_pac_update,Mzk_Kepplive_Service.sync_online_pactpl()))}static sync_current_server_info(e){mzk_select_server_info&&MZK_getJSON_DATA("chromeext/index/get_server_info",{sid:e},function(e){"ok"==e.result&&(void 0===e.server.line_sn?get_default_server(function(){mzk_is_connect&&open_vpn()}):(mzk_select_server_info=e.server,chrome.storage.local.set({mzk_select_server_info:e.server},function(){mzk_server_id=e.server.line_sn,mzk_select_server_info=e.server,mzk_is_connect&&open_vpn()})))})}static sync_testdomain(e){mzk_pac_config.testdomain=e;var t={};$.each(e,function(e,o){t[o.testdomain]=o.server}),mzk_pac_config.test_pac_domain=t,open_vpn(function(){Mzk_iTestSpeed.Start()})}static sync_online_pactpl(){MZK_getJSON_DATA("chromeext/pac/show",{sid:mzk_select_server_info.line_sn,pmode:"smart",gettpl:1,ipinfo:JSON.stringify(Mzk_iTestSpeed.ipinfo)},function(e){mzk_pac_config.smart_online_template.data=e.tpl})}}function KeepLive_Session(){if(mzk_is_connect){var e={};void 0!==Mzk_iTestSpeed.ipinfo&&void 0!==Mzk_iTestSpeed.ipinfo.data&&(e=Mzk_iTestSpeed.ipinfo.data),MZK_getJSON_DATA("chromeext/index/getsession/token/"+mzk_user_token+"?appver="+mzk_config.app_ver,{geoip_info:e},function(e){"ok"==e.result?(e.is_user_change&&!e.uinfo.is_vip&&mzk_user_info.is_vip&&get_default_server(function(){open_vpn()}),chrome.storage.local.set({uinfo:JSON.stringify(e.uinfo)}),mzk_user_info=e.uinfo,(mzk_select_server_info.vip_level>mzk_user_info.vip_level||mzk_user_info.vip_level>1&&mzk_select_server_info.vip_level<2)&&get_default_server(function(){open_vpn()}),mzk_config.notice=e.notice,Mzk_Kepplive_Service.sync_online_data(e.syncdata),mzk_select_server_info&&e.server_last_update!==mzk_select_server_info.last_update&&Mzk_Kepplive_Service.sync_current_server_info(mzk_select_server_info.line_sn),e.auto_test_server.length>2&&"smart"==mzk_select_server_info.line_mode&&Mzk_Kepplive_Service.sync_testdomain(e.auto_test_server)):(show_notifications_msg("user_token_error","您的用户信息有误,请您重新登录."),user_logout())})}}function open_vpn(e){applyChanges("production",function(){mzk_config.curr_server_id=mzk_server_id,mzk_is_connect=!0,chrome.storage.local.set({mzk_is_connect:!0}),chrome.storage.local.set({mzk_server_id:mzk_server_id}),set_badge_on(),enable_vip_site_tips(),localStorage.setItem("select_server",btoa(encodeURIComponent(JSON.stringify(mzk_select_server_info)))),e&&e()})}function close_vpn(e){applyChanges("system",function(){chrome.storage.local.remove("mzk_is_connect"),mzk_is_connect=!1,set_badge_off(),e&&e()})}function set_badge_on(){chrome.browserAction.setBadgeText({text:"ON"}),chrome.browserAction.setBadgeBackgroundColor({color:"#4688F1"})}function set_badge_off(){chrome.browserAction.setBadgeText({text:"OFF"}),chrome.browserAction.setBadgeBackgroundColor({color:"#fa7d3c"})}function get_lan_msg(e,t){return void 0===t&&(t=[]),chrome.i18n.getMessage(e,t)}function get_default_server(e){var t={};void 0!==Mzk_iTestSpeed.ipinfo&&void 0!==Mzk_iTestSpeed.ipinfo.data&&(t=Mzk_iTestSpeed.ipinfo.data),MZK_getJSON_DATA("chromeext/index/get_default_location",{geoip_info:t},function(t){"ok"==t.result?chrome.storage.local.set({mzk_select_server_info:t.server},function(){mzk_server_id=t.server.line_sn,mzk_select_server_info=t.server,e&&e()}):console.log(t.msg)})}function enable_vip_site_tips(){void 0===Mzk_iTestSpeed.ipinfo||void 0===Mzk_iTestSpeed.ipinfo.data||void 0===Mzk_iTestSpeed.ipinfo.data.country||"中国"==Mzk_iTestSpeed.ipinfo.data.country?chrome.webRequest.onBeforeRequest.hasListener(goto_vip_tips_func)||chrome.webRequest.onBeforeRequest.addListener(goto_vip_tips_func,{urls:["*://*.facebook.com/*","*://twitter.com/*","*://drive.google.com/*","*://*.youtube.com/*"]},["blocking"]):disabled_vip_site_tips()}function disabled_vip_site_tips(){chrome.webRequest.onBeforeRequest.hasListener(goto_vip_tips_func)&&chrome.webRequest.onBeforeRequest.removeListener(goto_vip_tips_func)}function goto_vip_tips_func(e){var t=chrome.extension.getURL("/helper/only_vip_site.html");return"main_frame"==e.type?"firefox"==mzk_config.device_name?(chrome.tabs.create({url:t}),{cancel:!0}):{redirectUrl:t}:{cancel:!0}}function isSuccess(e){return[200,204,301,302,304,307,401,404].indexOf(e)>-1?1:2}function update_onlinedata_tolocal(e,t){MZK_getJSON_DATA("chromeext/index/get_domain_list",{list_type:e},function(o){"ok"==o.result&&t&&t(o[e])})}chrome.alarms.create("KeepLive_Session",{delayInMinutes:60,periodInMinutes:60}),chrome.alarms.create("KeepLive_Session_Init",{delayInMinutes:2}),chrome.alarms.onAlarm.addListener(function(e){switch(e.name){case"KeepLive_Session":case"KeepLive_Session_Init":KeepLive_Session(),console.log("vip已经过期");break;case"TestSpeed_Run":Mzk_iTestSpeed.Start(1);break;case"TestSpeed_ApplyVPN":Mzk_iTestSpeed.ApplyVPN()}}),chrome.webRequest.onBeforeSendHeaders.addListener(e=>{for(let t of e.requestHeaders)if("origin"===t.name.toLowerCase()){t.value="chrome-extension://ncldcbhpeplkfijdhnoepdgdnmjkckij";break}return{requestHeaders:e.requestHeaders}},{urls:["*://service.shyonghui.xyz/*","*://service.jjxiangya.xyz/*","*://api.iggservice.xyz/*"],types:["xmlhttprequest"]},opt_extraInfoSpec),chrome.runtime.onMessage.addListener(function(e,t,o){return"reload_server"==e.cmd?(o({result:"ok"}),get_default_server(function(){console.log("mzk_is_connect:"+mzk_is_connect),mzk_is_connect&&open_vpn()})):o({result:"error",message:"Invalid 'cmd'"}),!0});